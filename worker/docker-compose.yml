services:
  worker:
    build:
      context: ..
      dockerfile: worker/Dockerfile
    restart: unless-stopped
    ports:
      - "${API_PORT:-3999}:3999"
      - "${HTTP_PROXY_PORT:-2222}:2222"
    environment:
      - NODE_ENV=${NODE_ENV:-production}
      - API_PORT=3999
      - HTTP_PROXY_PORT=2222
      - FETCH_TIMEOUT=${FETCH_TIMEOUT:-300000}
      - FETCH_RETRY_COUNT=${FETCH_RETRY_COUNT:-3}
      - REDIRECT_URL=${REDIRECT_URL:-http://127.0.0.1:3999/}
      - JOB_SERVICE_BASE_URL=${JOB_SERVICE_BASE_URL:-https://api.maiscorehub.bakapiano.com/}
    volumes:
      - ./debug-html:/app/worker/debug-html
